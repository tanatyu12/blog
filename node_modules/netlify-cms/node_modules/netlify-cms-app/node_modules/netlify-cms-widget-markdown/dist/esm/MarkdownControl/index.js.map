{"version":3,"sources":["../../../src/MarkdownControl/index.js"],"names":["MODE_STORAGE_KEY","editorControl","_getEditorComponents","getEditorControl","getEditorComponents","MarkdownControl","React","Component","constructor","props","mode","setState","localStorage","setItem","ref","state","getItem","render","onChange","onAddAsset","getAsset","value","classNameWrapper","field","visualEditor","processRef","handleMode","rawEditor","PropTypes","func","isRequired","string","ImmutablePropTypes","map"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;AAEA,MAAMA,gBAAgB,GAAG,aAAzB;AAEA,IAAIC,aAAJ;;AACA,IAAIC,oBAAoB,GAAG,MAAM,EAAjC;;AAEO,MAAMC,gBAAgB,GAAG,MAAMF,aAA/B;;;;AACA,MAAMG,mBAAmB,GAAG,MAAMF,oBAAoB,EAAtD;;;;AAEQ,MAAMG,eAAN,SAA8BC,eAAMC,SAApC,CAA8C;AAgB3DC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;;AADiB,wCAONC,IAAI,IAAI;AACnB,WAAKC,QAAL,CAAc;AAAED,QAAAA;AAAF,OAAd;AACAE,MAAAA,YAAY,CAACC,OAAb,CAAqBb,gBAArB,EAAuCU,IAAvC;AACD,KAVkB;;AAAA,wCAYNI,GAAG,IAAK,KAAKA,GAAL,GAAWA,GAZb;;AAEjBb,IAAAA,aAAa,GAAGQ,KAAK,CAACR,aAAtB;AACAC,IAAAA,oBAAoB,GAAGO,KAAK,CAACL,mBAA7B;AACA,SAAKW,KAAL,GAAa;AAAEL,MAAAA,IAAI,EAAEE,YAAY,CAACI,OAAb,CAAqBhB,gBAArB,KAA0C;AAAlD,KAAb;AACD;;AASDiB,EAAAA,MAAM,GAAG;AAAA,wBASH,KAAKR,KATF;AAAA,UAELS,QAFK,eAELA,QAFK;AAAA,UAGLC,UAHK,eAGLA,UAHK;AAAA,UAILC,QAJK,eAILA,QAJK;AAAA,UAKLC,KALK,eAKLA,KALK;AAAA,UAMLC,gBANK,eAMLA,gBANK;AAAA,UAOLC,KAPK,eAOLA,KAPK;AAAA,UAQLnB,mBARK,eAQLA,mBARK;AAAA,UAWCM,IAXD,GAWU,KAAKK,KAXf,CAWCL,IAXD;;AAYP,UAAMc,YAAY,GAChB;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAmC,MAAA,GAAG,EAAE,KAAKC;AAA7C,OACE,6BAAC,qBAAD;AACE,MAAA,QAAQ,EAAEP,QADZ;AAEE,MAAA,UAAU,EAAEC,UAFd;AAGE,MAAA,MAAM,EAAE,KAAKO,UAHf;AAIE,MAAA,QAAQ,EAAEN,QAJZ;AAKE,MAAA,SAAS,EAAEE,gBALb;AAME,MAAA,KAAK,EAAED,KANT;AAOE,MAAA,KAAK,EAAEE,KAPT;AAQE,MAAA,mBAAmB,EAAEnB;AARvB,MADF,CADF;;AAcA,UAAMuB,SAAS,GACb;AAAK,MAAA,SAAS,EAAC,gBAAf;AAAgC,MAAA,GAAG,EAAE,KAAKF;AAA1C,OACE,6BAAC,kBAAD;AACE,MAAA,QAAQ,EAAEP,QADZ;AAEE,MAAA,UAAU,EAAEC,UAFd;AAGE,MAAA,MAAM,EAAE,KAAKO,UAHf;AAIE,MAAA,QAAQ,EAAEN,QAJZ;AAKE,MAAA,SAAS,EAAEE,gBALb;AAME,MAAA,KAAK,EAAED,KANT;AAOE,MAAA,KAAK,EAAEE;AAPT,MADF,CADF;;AAaA,WAAOb,IAAI,KAAK,QAAT,GAAoBc,YAApB,GAAmCG,SAA1C;AACD;;AAtE0D;;;;gBAAxCtB,e,eACA;AACjBa,EAAAA,QAAQ,EAAEU,mBAAUC,IAAV,CAAeC,UADR;AAEjBX,EAAAA,UAAU,EAAES,mBAAUC,IAAV,CAAeC,UAFV;AAGjBV,EAAAA,QAAQ,EAAEQ,mBAAUC,IAAV,CAAeC,UAHR;AAIjBR,EAAAA,gBAAgB,EAAEM,mBAAUG,MAAV,CAAiBD,UAJlB;AAKjB7B,EAAAA,aAAa,EAAE2B,mBAAUC,IAAV,CAAeC,UALb;AAMjBT,EAAAA,KAAK,EAAEO,mBAAUG,MANA;AAOjBR,EAAAA,KAAK,EAAES,iCAAmBC,GAAnB,CAAuBH,UAPb;AAQjB1B,EAAAA,mBAAmB,EAAEwB,mBAAUC;AARd,C;;gBADAxB,e,kBAYG;AACpBgB,EAAAA,KAAK,EAAE;AADa,C","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport ImmutablePropTypes from 'react-immutable-proptypes';\nimport RawEditor from './RawEditor';\nimport VisualEditor from './VisualEditor';\n\nconst MODE_STORAGE_KEY = 'cms.md-mode';\n\nlet editorControl;\nlet _getEditorComponents = () => [];\n\nexport const getEditorControl = () => editorControl;\nexport const getEditorComponents = () => _getEditorComponents();\n\nexport default class MarkdownControl extends React.Component {\n  static propTypes = {\n    onChange: PropTypes.func.isRequired,\n    onAddAsset: PropTypes.func.isRequired,\n    getAsset: PropTypes.func.isRequired,\n    classNameWrapper: PropTypes.string.isRequired,\n    editorControl: PropTypes.func.isRequired,\n    value: PropTypes.string,\n    field: ImmutablePropTypes.map.isRequired,\n    getEditorComponents: PropTypes.func,\n  };\n\n  static defaultProps = {\n    value: '',\n  };\n\n  constructor(props) {\n    super(props);\n    editorControl = props.editorControl;\n    _getEditorComponents = props.getEditorComponents;\n    this.state = { mode: localStorage.getItem(MODE_STORAGE_KEY) || 'visual' };\n  }\n\n  handleMode = mode => {\n    this.setState({ mode });\n    localStorage.setItem(MODE_STORAGE_KEY, mode);\n  };\n\n  processRef = ref => (this.ref = ref);\n\n  render() {\n    const {\n      onChange,\n      onAddAsset,\n      getAsset,\n      value,\n      classNameWrapper,\n      field,\n      getEditorComponents,\n    } = this.props;\n\n    const { mode } = this.state;\n    const visualEditor = (\n      <div className=\"cms-editor-visual\" ref={this.processRef}>\n        <VisualEditor\n          onChange={onChange}\n          onAddAsset={onAddAsset}\n          onMode={this.handleMode}\n          getAsset={getAsset}\n          className={classNameWrapper}\n          value={value}\n          field={field}\n          getEditorComponents={getEditorComponents}\n        />\n      </div>\n    );\n    const rawEditor = (\n      <div className=\"cms-editor-raw\" ref={this.processRef}>\n        <RawEditor\n          onChange={onChange}\n          onAddAsset={onAddAsset}\n          onMode={this.handleMode}\n          getAsset={getAsset}\n          className={classNameWrapper}\n          value={value}\n          field={field}\n        />\n      </div>\n    );\n    return mode === 'visual' ? visualEditor : rawEditor;\n  }\n}\n"],"file":"index.js"}